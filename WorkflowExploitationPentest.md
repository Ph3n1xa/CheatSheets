# üî¥ WORKFLOW EXPLOITATION IP - RED TEAM

## üìñ D√âFINITION

**IP Target Exploitation Workflow** : M√©thodologie structur√©e d‚Äôattaque d‚Äôune cible identifi√©e par son adresse IP, depuis la reconnaissance passive jusqu‚Äô√† l‚Äôexploitation et le reporting. 
==Suit une approche progressive minimisant d√©tection tout en maximisant informations collect√©es.

-----

## üéØ PHASES D‚ÄôEXPLOITATION

### **[1] R√âCUP√âRATION IP CIBLE**

**Sources d‚Äôacquisition :**

- üìã Scope pentest contractuel
- üêõ Bug bounty program (scope d√©fini)
- üìß Headers e-mail (X-Originating-IP, Received)
- üìä Logs serveur/application
- üåê DNS records (A, AAAA)

-----

### **[2] RECONNAISSANCE PASSIVE**

*(Z√©ro contact direct avec cible)*

|Objectif               |Outil/Source                       |Donn√©es obtenues                                      |
|-----------------------|-----------------------------------|------------------------------------------------------|
|**WHOIS**              |`whois <IP>`, ipinfo.io, RIPE, ARIN|Propri√©taire, ASN, FAI, range IP                      |
|**G√©olocalisation**    |iplocation.net, IPinfo             |Pays, ville, datacenter                               |
|**Scan moteurs r√©seau**|Shodan, Censys, ZoomEye            |Ports ouverts historiques, services expos√©s, banni√®res|
|**R√©putation**         |AbuseIPDB, Spamhaus                |Blacklists, historique malveillant                    |
|**Reverse DNS**        |`dig -x <IP>`, `nslookup`          |Domaines associ√©s, hostnames                          |

**‚ö†Ô∏è Avantage cl√© :** Pas de logs g√©n√©r√©s c√¥t√© cible = furtivit√© maximale

-----

### **[3] RECONNAISSANCE ACTIVE**

*(Contact direct = logs g√©n√©r√©s)*

|Phase                  |Commande                       |Objectif                                                |
|-----------------------|-------------------------------|--------------------------------------------------------|
|**Scan ports**         |`nmap -sS -p- <IP>` / `masscan`|Identifier tous ports ouverts (TCP/UDP)                 |
|**D√©tection services** |`nmap -sV -p <ports>`          |Versions exactes services (Apache 2.4.41, SSH 7.9, etc.)|
|**OS Fingerprinting**  |`nmap -O <IP>`                 |Identifier OS cible (Linux/Windows, version)            |
|**Techno web**         |`whatweb <IP>`, Wappalyzer     |CMS, frameworks, langages backend                       |
|**Cartographie r√©seau**|`traceroute <IP>`              |Topology, ASN mapping, WAF d√©tection                    |

**‚ö° Rappel :** Toujours respecter rate limiting pour √©viter d√©tection IDS/IPS

-----

### **[4] ANALYSE CIBLES POTENTIELLES**

#### üåê **SERVICES WEB (80/443)**

```bash
# Identification CMS
whatweb http://<IP>
wpscan --url http://<IP>  # Si WordPress

# √ânum√©ration r√©pertoires
gobuster dir -u http://<IP> -w /usr/share/wordlists/dirb/common.txt

# Fichiers sensibles
curl http://<IP>/robots.txt
curl http://<IP>/.git/config
curl http://<IP>/.env
```

**Vulns √† chercher :**

- CVE CMS/plugins (exploit-db, searchsploit)
- Injections SQL, XSS, IDOR
- Misconfigurations (directory listing, debug mode)

#### üîê **SERVICES ADMIN (22/3389/21/445)**

```bash
# SSH (22)
hydra -l admin -P /usr/share/wordlists/rockyou.txt ssh://<IP>

# RDP (3389)  
ncrack -u administrator -P passwords.txt rdp://<IP>

# FTP (21)
nmap --script ftp-anon <IP>  # Anonymous login?

# SMB (445)
enum4linux -a <IP>
smbclient -L //<IP> -N  # Null session
```

**Points v√©rification :**

- ‚úÖ Default credentials (admin/admin, root/root)
- ‚úÖ Anonymous access autoris√©
- ‚úÖ Versions vuln√©rables (EternalBlue, ProFTPd 1.3.5‚Ä¶)

#### üì® **AUTRES PROTOCOLES**

- **SMTP (25)** ‚Üí User enumeration (VRFY, EXPN)
- **MySQL (3306)** ‚Üí Bruteforce root, injection si web app
- **MongoDB (27017)** ‚Üí No-auth exposure (tr√®s fr√©quent)

-----

### **[5] EXPLOITATION**

*(Scope autoris√© uniquement)*

#### üîß M√©thodes

```bash
# Exploitation CVE manuelle
searchsploit <service> <version>
python3 exploit.py <IP>

# Metasploit Framework
msfconsole
use exploit/linux/http/<vuln>
set RHOST <IP>
exploit

# SQLi automatis√©e
sqlmap -u "http://<IP>/page?id=1" --dbs --batch

# Bruteforce credentials
hydra -L users.txt -P pass.txt <IP> <service>
```

#### üöÄ Post-Exploitation

- Escalade privil√®ges (linpeas, winpeas)
- Pivoting r√©seau interne
- Persistence (backdoors, cron jobs)
- Exfiltration donn√©es

-----

### **[6] POST-EXPLOITATION & REPORTING**

#### üìã Preuves de Concept (PoC)

```markdown
‚úÖ Screenshots exploitation r√©ussie
‚úÖ Command output complet
‚úÖ Hashes/credentials r√©cup√©r√©s (anonymis√©s si sensible)
‚úÖ Fichiers exfiltr√©s (liste, pas contenu)
```

#### üìÑ Documentation rapport

```
[VULN√âRABILIT√â] - Titre clair (ex: "SQL Injection - Login Page")

CRITICIT√â: Critique/√âlev√©e/Moyenne/Faible
CVSS: X.X

DESCRIPTION:
- Contexte technique
- Endpoint/service affect√©

√âTAPES REPRODUCTION:
1. Commande exacte
2. Param√®tres utilis√©s
3. R√©sultat obtenu

IMPACT:
- Compromission donn√©es
- Acc√®s admin
- RCE possible

RECOMMANDATIONS:
- Patch version X.X.X
- D√©sactiver service non n√©cessaire
- Impl√©menter WAF rules
```

-----

## üî¥ VISION RED TEAM (OPSEC)

### ‚ö†Ô∏è Pr√©cautions d√©tection

|Risque             |Mitigation                                     |
|-------------------|-----------------------------------------------|
|**IDS/IPS alerts** |Rate limiting scans (`-T2` nmap), proxychains  |
|**Logs connexion** |VPN/VPS jetables, User-Agent randomis√©s        |
|**Bannissement IP**|Rotation IPs, respecter scope bounty           |
|**Honeypots**      |V√©rifier r√©ponses services (trop facile = trap)|

### ‚úÖ Checklist l√©gale

```
‚ñ° Scope autoris√© √©crit (contrat/bounty policy)
‚ñ° IP dans range autoris√©
‚ñ° Techniques permises v√©rifi√©es (no DoS g√©n√©ralement)
‚ñ° Communication avec client si prod impact√©
‚ñ° Backup PoC avant cleanup
```

-----

## üìã M√âMO EXPRESS

### üéØ Workflow = 6 phases reconnaissance ‚Üí exploitation

**[1] R√©cup√©ration IP** ‚Üí Scope/bounty/logs/headers  
**[2] Recon Passive** ‚Üí WHOIS, Shodan, g√©oloc, reverse DNS (pas de logs)  
**[3] Recon Active** ‚Üí nmap ports/services/OS, whatweb, traceroute (logs g√©n√©r√©s)  
**[4] Analyse Cibles** ‚Üí Web (CMS, CVE, fichiers), Admin (SSH/RDP/SMB bruteforce), Protocoles (SMTP/MySQL)  
**[5] Exploitation** ‚Üí CVE scripts, Metasploit, sqlmap, escalade privil√®ges  
**[6] Reporting** ‚Üí PoC screenshots, steps exactes, recommandations

### ‚ö° Points cl√©s r√©tention

1. **Passive avant Active** ‚Üí Maximiser infos sans alerter cible (Shodan > nmap)
2. **Toujours v√©rifier scope** ‚Üí IP autoris√©e = obligatoire (l√©gal)
3. **Version services = critique** ‚Üí `nmap -sV` identifie CVEs exploitables
4. **Default creds underrated** ‚Üí Admin/admin marche encore trop souvent
5. **Documentation = preuve valeur** ‚Üí Rapport clair diff√©rencie pro du script kiddie

### üîß Commandes essentielles m√©moriser

```bash
whois <IP>                                    # WHOIS lookup
nmap -sS -sV -O -p- <IP>                      # Scan complet
whatweb http://<IP>                           # Fingerprint web
searchsploit <service> <version>              # CVE search
hydra -l admin -P rockyou.txt ssh://<IP>      # Bruteforce
```
