
## ==üîé Python ‚Äî Automatisation & reconnaissance (8)

### 1. V√©rifier l‚Äôaccessibilit√© HTTP d‚Äôune liste d‚ÄôURLs ‚Üí CSV
- **But :** tester status HTTP et exporter CSV.
- **Usage :** `python3 req_check.py`
- [ ] test√©

```python
# req_check.py
import requests, csv

urls = ["http://127.0.0.1:8000","http://example.com"]  # adapter
with open("report.csv","w", newline="") as f:
    w = csv.writer(f)
    w.writerow(["url", "status"])
    for u in urls:
        try:
            r = requests.get(u, timeout=5)
            w.writerow([u, r.status_code])
        except Exception:
            w.writerow([u, "ERR"])
````

---

### 2. Extraire tous les liens d‚Äôune page (BeautifulSoup)

- **But :** r√©cup√©rer links pour reconnaissance web.
    
- **Usage :** `python3 extract_links.py`
    
- [ ] test√©
    

```python
# extract_links.py
from bs4 import BeautifulSoup
import requests

r = requests.get("http://127.0.0.1:8000")
soup = BeautifulSoup(r.text, "html.parser")
links = [a.get("href") for a in soup.find_all("a")]
print("\n".join(filter(None, links)))
```

---

### 3. Parser un fichier de logs et compter IPs les plus fr√©quentes

- **But :** trouver IPs les plus actives dans un access.log
    
- **Usage :** `python3 top_ips.py`
    
- [ ]  test√©
    

```python
# top_ips.py
from collections import Counter

with open("access.log") as f:
    ips = [line.split()[0] for line in f if line.strip()]
print(Counter(ips).most_common(10))
```

---

### 4. Scanner de ports simple (localhost only)

- **But :** scanner ports 1‚Äì1024 sur `127.0.0.1` (p√©dago)
    
- **Usage :** `python3 port_scan_local.py`
    
- [ ] test√©
    

```python
# port_scan_local.py
import socket

open_ports = []
for p in range(1, 1025):
    s = socket.socket()
    s.settimeout(0.25)
    try:
        if s.connect_ex(("127.0.0.1", p)) == 0:
            open_ports.append(p)
    except Exception:
        pass
    finally:
        s.close()
print("Open ports:", open_ports)
```

---

### 5. Script d‚ÄôAPI : r√©cup√©rer JSON ‚Üí JSONL

- **But :** normaliser output d‚Äôune API locale
    
- **Usage :** `python3 api_to_jsonl.py`
    
- [ ] test√©
    

```python
# api_to_jsonl.py
import requests, json

r = requests.get("http://127.0.0.1:5000/api/items")
data = r.json()
with open("out.jsonl", "w") as f:
    for item in data:
        f.write(json.dumps(item, ensure_ascii=False) + "\n")
```

---

### 6. Fuzzer de param√®tres (outline safe ‚Äî labo)

- **But :** tester variations simples d‚Äôun param√®tre `q` en local
    
- **Usage :** adapter payloads, lancer sur app locale
    
- [ ] test√©
    

```python
# param_fuzzer.py (outline)
import requests

url = "http://127.0.0.1:3000/search"
payloads = ["test", "' OR '1'='1", "<script>alert(1)</script>", "../../etc/passwd"]
for p in payloads:
    try:
        r = requests.get(url, params={"q": p}, timeout=5)
        print(p, r.status_code, len(r.text))
    except Exception as e:
        print(p, "ERR", e)
```

---

### 7. Hasher des mots de passe (ex: SHA256)

- **But :** d√©monstration hashing
    
- **Usage :** `python3 hash_pw.py`
    
- [ ] test√©
    

```python
# hash_pw.py
import hashlib, getpass

pw = getpass.getpass("Mot de passe: ")
print("SHA256:", hashlib.sha256(pw.encode()).hexdigest())
```

---

### 8. Template CLI en Python (argparse)

- **But :** base pour cr√©er des outils CLI
    
- **Usage :** `python3 cli_template.py --target 127.0.0.1`
    
- [ ] test√©
    

```python
# cli_template.py
import argparse

p = argparse.ArgumentParser(description="Template CLI")
p.add_argument("--target", required=True)
p.add_argument("--port", type=int, default=80)
args = p.parse_args()
print("Target:", args.target, "Port:", args.port)
```

---

## ==üñ•Ô∏è Bash / Shell (4)

### 9. One-liner : lister ports/services (local)

- **But :** commande rapide
    
- [ ] test√©
    

```bash
# one-liner
ss -tuln | head -n 20
```

---

### 10. Script Bash : sauvegarde de logs r√©cents

- **But :** backup rapide syslog
    
- **Usage :** `bash backup_logs.sh`
    
- [ ] test√©
    

```bash
#!/bin/bash
# backup_logs.sh
mkdir -p ~/logs_backup
cp /var/log/syslog ~/logs_backup/syslog.$(date +%F)
echo "Backup created: ~/logs_backup"
```

---

### 11. Pipeline grep/awk : extraire IPs d‚Äô√©checs SSH

- **But :** trouver brute-force sources (local logs)
    
- [ ] test√©
    

```bash
# grep-awk-ip.sh
grep "Failed password" /var/log/auth.log | awk '{print $(NF-3)}' | sort | uniq -c | sort -nr
```

---

### 12. Automatiser nmap (localhost safe)

- **But :** lancer nmap sur localhost et sauvegarder
    
- **Usage :** `bash nmap_local.sh`
    
- [ ] test√©
    

```bash
#!/bin/bash
# nmap_local.sh (lab only)
nmap -sT -p 1-1024 127.0.0.1 -oN scan_local.txt
echo "Scan saved to scan_local.txt"
```

---

## ==ü™ü PowerShell (Windows) (3)

> Ouvre PowerShell en Admin pour certaines commandes.

### 13. Lister processus et exporter CSV

- **But :** inventaire processeur
    
- [ ] test√©
    

```powershell
# Get-Processes.ps1
Get-Process | Select-Object Id,ProcessName,CPU | Export-Csv processes.csv -NoTypeInformation
```

---

### 14. V√©rifier service Windows

- **But :** check d‚Äôun service (ex: Windows Update)
    
- [ ] test√©
    

```powershell
# Check-Service.ps1
Get-Service -Name wuauserv | Format-Table Name,Status
```

---

### 15. R√©cup√©rer utilisateurs locaux (lab)

- **But :** exporter utilisateurs locaux
    
- [ ] test√©
    

```powershell
# Export-LocalUsers.ps1
Get-LocalUser | Select Name,Enabled | Export-Csv users.csv -NoTypeInformation
```

---

## ==üåê Web / App-specific (JS/SQL concepts) (5)

### 16. Mini-scan JS : v√©rifier pr√©sence d‚Äôun champ `<input name="q">`

- **But :** check rapide c√¥t√© serveur rendu
    
- **Usage :** `node check_input.js`
    
- [ ] test√©
    

```javascript
// check_input.js (node)
const axios = require('axios'), cheerio = require('cheerio');
axios.get('http://127.0.0.1:3000').then(r=>{
  const $ = cheerio.load(r.data);
  console.log($('input[name="q"]').length ? "found" : "not found");
}).catch(e=>console.error("ERR", e.message));
```

---

### 17. Sanitization example (Flask) ‚Äî √©viter XSS

- **But :** d√©montrer escape avant rendu
    
- **Usage :** `python3 app.py` et visiter `http://127.0.0.1:5000/hello?name=<...>`
    
- [ ] test√©
    

```python
# app.py (Flask)
from flask import Flask, request, escape
app = Flask(__name__)

@app.route("/hello")
def hello():
    name = escape(request.args.get("name", "anon"))
    return f"Hello {name}"

if __name__ == "__main__":
    app.run(port=5000)
```

---

### 18. Exemple param√©trised query (pr√©venir SQLi)

- **But :** montrer bon usage des requ√™tes SQL param√©tr√©es
    
- [ ] test√©
    

```python
# safe_sql.py (sqlite example)
import sqlite3

conn = sqlite3.connect('test.db')
cur = conn.cursor()
user_id = 1  # ne pas concatener dans la query
cur.execute("SELECT * FROM users WHERE id = ?", (user_id,))
print(cur.fetchall())
conn.close()
```

---

### 19. Docker-compose wrapper (outline)

- **But :** lancer multiples services lab et v√©rifier sant√©
    
- **Usage :** adapter ton `docker-compose.yml`, ex√©cuter `python3 dc_wrapper.py`
    
- [ ] test√©
    

```python
# dc_wrapper.py (outline)
import subprocess

def up():
    subprocess.run(["docker-compose", "up", "-d"])
def ps():
    subprocess.run(["docker-compose", "ps"])
if __name__ == "__main__":
    up()
    ps()
```

---

### 20. G√©n√©rateur de rapports CSV ‚Üí PDF (outline)

- **But :** lire CSV, g√©n√©rer PDF sommaire (reportlab ou autre)
    
- **Usage :** adapter/installer `reportlab`
    
- [ ] test√©
    

```python
# csv_to_pdf_outline.py (outline)
# Exemple bref : lire CSV et cr√©er PDF ‚Äî utiliser reportlab pour mise en forme r√©elle
import csv
from reportlab.lib.pagesizes import A4
from reportlab.pdfgen import canvas

c = canvas.Canvas("report.pdf", pagesize=A4)
with open("report.csv") as f:
    for i, line in enumerate(f):
        c.drawString(40, 800 - 12*i, line.strip())
c.save()
```

---

## ==‚úÖ Checklist finale

- [ ]  1 req_check.py
    
- [ ]  2 extract_links.py
    
- [ ]  3 top_ips.py
    
- [ ]  4 port_scan_local.py
    
- [ ]  5 api_to_jsonl.py
    
- [ ]  6 param_fuzzer.py
    
- [ ]  7 hash_pw.py
    
- [ ]  8 cli_template.py
    
- [ ]  9 ss -tuln
    
- [ ]  10 backup_logs.sh
    
- [ ]  11 grep-awk-ip.sh
    
- [ ]  12 nmap_local.sh
    
- [ ]  13 Get-Processes.ps1
    
- [ ]  14 Check-Service.ps1
    
- [ ]  15 Export-LocalUsers.ps1
    
- [ ]  16 check_input.js
    
- [ ]  17 app.py (Flask)
    
- [ ]  18 safe_sql.py
    
- [ ]  19 dc_wrapper.py
    
- [ ]  20 csv_to_pdf_outline.py
    

---
